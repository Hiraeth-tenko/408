---
aliases: []
tags:
  - 操作系统
date created: 2023-09-09 六 12:43:44
date modified: 2023-09-09 六 04:58:20
---

# Link

---

Previous: [操作系统发展历程](操作系统发展历程.md)

Next:[进程](进程.md)

# 操作系统运行环境

---

## 用户态和内核态

为避免用户破坏系统资源和环境，操作系统分为用户态和内核态。

处于用户态时，只能使用非特权指令；内核态可以使用非特权指令和特权指令。

当需要访问用户不可访问的资源时，用户程序需要通过访管指令或者自陷指令发起系统调用。

## 系统调用

系统调用大致分为这些：

- 设备管理
- 文件管理
- 进程控制
- 进程通信
- 内存管理

发起系统调用后，操作系统从用户态移动到内核态，执行完毕后返回用户态。

过程：

- 传递系统调用参数
- 执行自陷指令
- 执行对应的服务程序
- 返回用户态

## 中断和异常

更详细的内容：

- [中断](中断.md)
- [异常](异常.md)

| 类别 | 原因                | 异步/同步 | 返回行为             |
| ---- | ------------------- | --------- | -------------------- |
| 中断 | 来至 I/O 设备的信号 | 异步      | 总是返回到下一条指令 |
| 自陷 | 有意而为的异常      | 同步      | 总是返回到下一条指令 |
| 故障 | 潜在可恢复的异常    | 同步      | 可能返回到当前指令   |
| 终止 | 不可恢复的错误      | 同步      | 不会返回             |

### 中断

外部设备发生异常后，触发一个中断请求。来自外部设备的均属于中断。

可屏蔽中断：通过 INTR 线发送中断。
不可屏蔽中断：通过 NMI 线发送中断。

### 异常

#### 自陷

用于发起系统调用。

#### 故障

由错误情况引起，例如：缺页故障。主要是来自内部的异常。

#### 终止

不可恢复的致命错误，通常表现为硬件错误，例如：DRAM 或者 SRAM 损坏导致的奇偶错误；除以 0。

# Relative

---

[操作系统思维导图](操作系统思维导图.md)

# Reference

---
