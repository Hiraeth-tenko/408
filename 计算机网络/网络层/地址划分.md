---
aliases:
tags:
  - 计算机网络
date created: 2023-09-19 二 04:23:23
date modified: 2023-09-22 五 05:11:09
---

# Link

---

Previous:[IPv4](IPv4.md)

Next:[DHCP](DHCP.md)

# 地址划分

---

## 早期分类

将 IP 地址划分为 A、B、C、D、E 八类，其中 D 是组播地址，E 保留日后使用。

| 类型 | 首位 | 网络号   | 主机号   |
| ---- | ---- | -------- | -------- |
| A 类 | 0    | 高 8 位  | 低 24 位 |
| B 类 | 10   | 高 16 位 | 低 16 位 |
| C 类 | 110  | 高 24 位 | 低 8 位  |
| D 类 | 1110 | 多播地址 |          |
| E 类 | 1111 | 保留     |          |

## 特殊地址

| 特殊地址   | 意义                       |
| ---------- | -------------------------- |
| 主机号全 0 | 表示该网络                 |
| 主机号全 1 | 表示该网络的直接广播地址   |
| 全 1       | 表示 TCP/IP 协议的广播地址 |
| 全 0       | 表示该主机                 |
| 127.x.x.x  | 回环地址，不会出现在网络上 |

对于全 1 地址（255.255.255.255），由于路由器对广播域的划分，使得只能在主机所在的网络内广播。

## CIDR

CIDR 分配的地址格式如下：
a.b.c.d/x
/x 表示 IP 地址最高 x 位作为网络号使用，剩下作为子网号和主机号使用。

### 路由聚合

网络前缀相同的连续 IP 地址组成 CIDR 地址块，这种聚合称为路由聚合。

### 最长前缀匹配原则

在识别下一跳的转发 IP 地址时，采取最长前缀匹配原则，匹配长度最长的地址作为下一跳的地址。

## NAT

子网内的本地 IP 地址，通过 NAT 路由器转换为全球 IP 地址。

NAT 路由器维护一个 NAT 转换表，表项形如
【本地 IP 地址 : 端口】，【全球 IP 地址 : 端口】

### 私有地址

NAT 划分了多个特殊的网段作为私有地址，来自私有地址的数据报不会被转发出专有网络。

| 类型 | 数量 | 范围                                |
| ---- | ---- | ----------------------------------- |
| A 类 | 1    | **10**.0.0.0~**10**.255.255.255     |
| B 类 | 16   | **172.16**.0.0~**172.31**.255.255   |
| C 类 | 256  | **192.168.0**.0~**192.168.255**.255 |

加粗部分为网络号。

## 子网划分与子网掩码

从主机号分出几位比特作为子网号，IP 地址被进一步划分为【网络号，子网号，主机号】。

在划分子网后，主机号仍然不能为全 1 或全 0。全 1 留作子网内广播地址，全 0 留作本机。

要识别子网划分情况，使用子网掩码来表达。子网掩码是一串 1 和一串 0 的序列，和 IP 地址进行与运算后得到子网地址。

CIDR 的最长前缀位数与子网掩码位数长度一致。

# Relative

---

[网络层](网络层.md)

# Reference

---
