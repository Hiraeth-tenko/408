---
aliases:
tags:
  - 计算机网络
date created: 2023-09-19 二 04:03:46
date modified: 2023-09-19 二 04:10:35
---

# Link

---

Previous: [UDP](UDP.md)

Next: [网络层](网络层.md)

# TCP

---

## 和 UDP 相比

- 面向连接：TCP 需要先通过“三次握手”建立 TCP 连接，随后开始发送数据，需要维护 TCP 连接。
- 面向字节流。
- 只能建立一对一的连接（点到点）。
- 全双工连接。
- 使用**累积确认**。
- 提供可靠数据传输服务：无差错、不丢失、不重复、有序到达

## **TCP 报文段结构**

**重点**

![TPC报文段结构](TPC报文段结构.png)

- 源端口号和目的端口号：均为 16 bit。传输层复用分用需要使用端口号。
- 序号：32bit 。TCP 面向字节流，对**每个字节编号**。序号字段表示该报文段嗦发送数据的第一个字节的序号。用于保证可靠数据传输。
- 确认号：32bit。用于表示**下一个**期望接收字节的序号。
- 首部长度：4bit。由于选项的长度可变，所以 TCP 需要通过首部长度字段给出首部长。不包括选项时，**TCP 长度固定为 20B**；包括选项时，**TCP 长度最长为 60B**。
- 接收窗口：表示接收方还可接收多少数据，即缓存空间大小。
- 标志位（Flags）
  - ACK：1 表示用于指示确认号的值有效（即下一个期望接收字节的序号）。0 表示无效。
  - RST：1 表示 TCP 连接出现严重差错，需要重新建立连接。
  - SYN：
    - SYN=1，ACK=0 表示是一个连接请求报文。
    - SYN=1，ACK=1 用于回应同意连接的响应报文。
  - FIN：1 表示数据发送完毕，请求释放连接。
- 检验和：检验和需要检验**首部和数据**。

### 超时重传

对每个报文段都设置一次计时器，当计时器设置的重传时间到期还未收到报文的 ACK 报文段，则重传该报文段。

### **TCP 连接管理**

![TCP连接管理](TCP连接管理.md)

### **TCP 拥塞控制**

![TCP拥塞控制](TCP拥塞控制.md)

# Relative

---

[传输层](传输层.md)

[UDP](UDP.md)

# Reference

---
